---
- hosts: 172.31.7.165
  become: yes
  become_method: sudo
 
  tasks:
     - name: creates logical and physical volume
       lvg:
           vg: test-lvm
           pvs: /dev/xvdf /dev/xvdg
      
     - name: create LV
       lovl:
            vg: test-lvm
            lv: new-vol1
     - name: Create Directory
       file:
            path: /mnt/lvm1
            state: directory
     - name: create file system
       filesystem:
            fstype: ext3
            dev: /dev/test-lvm/new-vol1
     - name: mount logical volume
       mount:
            name: /mnt/lvm1
            src: /dev/test-lvm/new-vol1
